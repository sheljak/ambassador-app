# Replit configuration for Expo React Native app

language = "nodejs"

# Use LAN mode (works with Replit port forwarding)
# For device connection, use Replit's port forwarding feature
run = "npx expo start --tunnel"
modules = ["nodejs-20", "nix"]

[deploy]
run = ["sh", "-c", "npx expo start --tunnel"]

[env]
NODE_ENV = "development"
EXPO_PUBLIC_ENABLE_STATIC_RENDERING = "false"
EXPO_TUNNEL_TIMEOUT = "120000"

# Using Replit's default Node.js environment
# No nix configuration needed - Replit has Node.js pre-installed

[languages.javascript]
languageServer = { start = "typescript-language-server --stdio" }

[languages.typescript]
languageServer = { start = "typescript-language-server --stdio" }

[nix]
channel = "stable-25_05"

[[ports]]
localPort = 8081
externalPort = 80

[workflows]

[[workflows.workflow]]
name = "Update packages"
mode = "sequential"
author = 53802457

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "npm install"

[[workflows.workflow]]
name = "Commit to main"
mode = "sequential"
author = 53802457

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "./git-sync.sh main"

[[workflows.workflow]]
name = "Start"
mode = "parallel"
author = 53802457

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "npm start"

[agent]
expertMode = true
